<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>éƒ¨æ´»äººç”Ÿã‚²ãƒ¼ãƒ </title>
<style>
  body { background: #eef2f3; font-family: sans-serif; text-align: center; margin: 0; padding: 20px; }
  /* ãƒ†ãƒ‹ã‚¹ã‚³ãƒ¼ãƒˆé¢¨ãƒœãƒ¼ãƒ‰ */
  #board { 
    display: grid; 
    grid-template-columns: repeat(7, 120px); 
    gap: 10px; 
    justify-content: center; 
    margin: 20px auto; 
  }
  .square { 
    border: 3px solid white; 
    height: 120px; 
    background: #2e8b57; /* ã‚³ãƒ¼ãƒˆã®ç·‘ */
    color: white; 
    position: relative; 
    display: flex; 
    flex-direction: column; 
    justify-content: flex-start; 
    padding: 10px; 
    box-sizing: border-box; 
    border-radius: 8px;
    font-size: 13px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
  }
  /* ç‰¹åˆ¥ãªãƒã‚¹ã®è‰² */
  .type-start { background: #27ae60 !important; }
  .type-goal  { background: #2c3e50 !important; }
  .type-reward { background: #f1c40f !important; color: #333 !important; }
  .type-mini   { background: #e74c3c !important; }
  .type-warp   { background: #3498db !important; }

  .square-num { font-size: 14px; font-weight: bold; border-bottom: 1px solid rgba(255,255,255,0.3); margin-bottom: 5px; }
  .square-price { font-size: 11px; background: rgba(0,0,0,0.3); border-radius: 3px; margin-top: 5px; }

  #diceArea { margin: 20px; }
  #diceBtn { padding: 15px 30px; font-size: 20px; cursor: pointer; border-radius: 50px; background: #2e8b57; color: white; border: none; box-shadow: 0 4px #1e5d3a; }
  #diceBtn:active { transform: translateY(2px); box-shadow: 0 2px #1e5d3a; }
  
  #eventLog { background: #fffbe6; padding: 15px; border-radius: 10px; max-width: 600px; margin: 10px auto; font-weight: bold; border-left: 5px solid #f1c40f; }

  .token { width: 18px; height: 18px; border-radius: 50%; border: 2px solid white; display: inline-block; margin: 2px; }
  .money-card { display: inline-block; padding: 10px; margin: 5px; background: white; border-radius: 5px; border: 2px solid #ccc; }
  .active-p { border-color: #2e8b57; background: #e8f5e9; transform: scale(1.1); }
</style>
</head>
<body>

<h1>ğŸ¾ éƒ¨æ´»äººç”Ÿã‚²ãƒ¼ãƒ </h1>

<div id="diceArea">
  <div id="diceNum" style="font-size: 40px; font-weight: bold; margin-bottom: 10px;">ğŸ² ?</div>
  <button id="diceBtn" onclick="rollDice()">ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹ï¼</button>
</div>

<div id="eventLog">éƒ¨å“¡åã‚’å…¥åŠ›ã—ã¦é–‹å§‹ã—ã¦ãã ã•ã„ã€‚</div>
<div id="board"></div>
<div id="statusArea"></div>

<script>
// ãƒã‚¹ç›®ãƒ‡ãƒ¼ã‚¿
const squares = [
  {t:"start", txt:"ã‚³ãƒ¼ãƒˆã«é›†åˆ"},
  {t:"normal", txt:"ãƒ©ã‚±ãƒƒãƒˆç²‰ç •", m:-20000},
  {t:"normal", txt:"è‡ªè»¢è»Šãƒ‘ãƒ³ã‚¯", m:-2000},
  {t:"reward", txt:"OBã®å·®ã—å…¥ã‚Œ", m:3000},
  {t:"normal", txt:"å¤§ä¼šå‡ºå ´æ±ºå®š", m:5000},
  {t:"mini", txt:"ç¾å®ŸãƒŸãƒ‹ã‚²ãƒ¼ãƒ ", m:0},
  {t:"warp", txt:"ãƒ¯ãƒ¼ãƒ—ï¼", m:0},
  {t:"normal", txt:"è©¦åˆã«å‹åˆ©ï¼", m:3000},
  {t:"normal", txt:"ç·´ç¿’è©¦åˆæ•—åŒ—", m:-2000},
  {t:"reward", txt:"ãƒ‰ãƒªãƒ³ã‚¯ç²å¾—", m:500},
  {t:"normal", txt:"é›¨ã§ã‚ªãƒ•", m:0},
  {t:"mini", txt:"ç¾å®ŸãƒŸãƒ‹ã‚²ãƒ¼ãƒ ", m:0},
  {t:"normal", txt:"é›ªã§ç­‹ãƒˆãƒ¬", m:-1000},
  {t:"warp", txt:"ãƒ¯ãƒ¼ãƒ—ï¼", m:0},
  {t:"normal", txt:"ãƒ•ã‚©ãƒ¼ãƒ è¿·èµ°", m:-1000},
  {t:"reward", txt:"è‡¨æ™‚ãƒœãƒ¼ãƒŠã‚¹", m:10000},
  {t:"normal", txt:"ãƒŸã‚¹ã§ç™ºç‹‚", m:-1000},
  {t:"mini", txt:"ç¾å®ŸãƒŸãƒ‹ã‚²ãƒ¼ãƒ ", m:0},
  {t:"normal", txt:"ã‚¹ã‚³ã‚¢ãƒ—ãƒ©ã‚¹", m:2000},
  {t:"warp", txt:"ãƒ¯ãƒ¼ãƒ—ï¼", m:0},
  {t:"normal", txt:"ã‚¹ã‚³ã‚¢ãƒã‚¤ãƒŠã‚¹", m:-1500},
  {t:"normal", txt:"ã‚¬ãƒƒãƒˆå¼µæ›¿", m:-2000},
  {t:"reward", txt:"ãŠè“å­ç²å¾—", m:300},
  {t:"mini", txt:"ç¾å®ŸãƒŸãƒ‹ã‚²ãƒ¼ãƒ ", m:0},
  {t:"normal", txt:"é¡§å•ã«è¤’èª‰", m:1000},
  {t:"warp", txt:"ãƒ¯ãƒ¼ãƒ—ï¼", m:0},
  {t:"normal", txt:"ã‚µãƒ¼ãƒ–è¿·èµ°", m:-1000},
  {t:"reward", txt:"éƒ¨è²»ã®ä½™ã‚Š", m:5000},
  {t:"normal", txt:"ã™ã­ã«å½“ã¦ã‚‹", m:-1000},
  {t:"mini", txt:"ç¾å®ŸãƒŸãƒ‹ã‚²ãƒ¼ãƒ ", m:0},
  {t:"normal", txt:"æœ€é«˜ã®ä¸€æ‰“", m:2000},
  {t:"goal", txt:"å¼•é€€è©¦åˆï¼"}
];

let players = [];
let turn = 0;
let isMoving = false;

// åˆæœŸåŒ–
function init() {
  let count = parseInt(prompt("éƒ¨å“¡ã¯ä½•äººï¼Ÿ(1-14)")) || 1;
  for(let i=0; i<Math.min(count, 14); i++){
    players.push({ id:i, name: prompt((i+1)+"äººç›®ã®åå‰") || "éƒ¨å“¡"+(i+1), pos: 0, money: 0, goal: false, color: `hsl(${i*40}, 70%, 50%)` });
  }
  renderBoard();
  updateStatus();
}

function renderBoard() {
  const b = document.getElementById("board");
  b.innerHTML = "";
  squares.forEach((s, i) => {
    const div = document.createElement("div");
    div.className = `square type-${s.t}`;
    div.innerHTML = `<div class="square-num">${i}</div><div style="font-weight:bold">${s.txt}</div>`;
    if(s.m !== 0) div.innerHTML += `<div class="square-price">${s.m > 0 ? '+':''}${s.m}å††</div>`;
    div.innerHTML += `<div id="p-at-${i}"></div>`;
    b.appendChild(div);
  });
  players.forEach(p => {
    const container = document.getElementById(`p-at-${p.pos}`);
    const t = document.createElement("div");
    t.className = "token";
    t.style.background = p.color;
    container.appendChild(t);
  });
}

function updateStatus() {
  const s = document.getElementById("statusArea");
  s.innerHTML = players.map((p, i) => `
    <div class="money-card ${i===turn ? 'active-p':''}">
      <b style="color:${p.color}">â— ${p.name}</b><br>ğŸ’° ${p.money}å††
    </div>
  `).join("");
}

function rollDice() {
  if(isMoving || players[turn].goal) return;
  isMoving = true;
  
  let dice = 0;
  let count = 0;
  const timer = setInterval(() => {
    dice = Math.floor(Math.random() * 6) + 1;
    document.getElementById("diceNum").innerText = "ğŸ² " + dice;
    if(count++ > 10) {
      clearInterval(timer);
      move(dice);
    }
  }, 60);
}

function move(steps) {
  let p = players[turn];
  p.pos += steps;
  if(p.pos >= squares.length - 1) {
    p.pos = squares.length - 1;
    p.goal = true;
  }
  
  const s = squares[p.pos];
  let msg = `${p.name}ï¼š${s.txt}ï¼`;
  p.money += s.m;

  if(s.t === "warp") {
    let j = Math.floor(Math.random()*2)+1;
    p.pos = Math.max(0, p.pos + (Math.random()>0.5 ? j : -j));
    msg += " ãƒ¯ãƒ¼ãƒ—ç™ºå‹•ï¼";
  }

  document.getElementById("eventLog").innerText = msg;
  renderBoard();
  updateStatus();

  setTimeout(() => {
    isMoving = false;
    do { turn = (turn + 1) % players.length; } while(players[turn].goal && !players.every(pl=>pl.goal));
    updateStatus();
    if(players.every(pl=>pl.goal)) alert("å…¨å“¡å¼•é€€ã—ã¾ã—ãŸï¼ãŠç–²ã‚Œæ§˜ï¼");
  }, 1000);
}

init();
</script>
</body>
</html>
